// import db from './database.js'
let handler = async (m, { conn, text }) => {
  let who;

  // ุชุญูู ููุง ุฅุฐุง ูุงู ุงูุฑุฏ ุนูู ุฑุณุงูุฉ
  if (m.quoted && m.quoted.sender) {
    who = m.quoted.sender; // ุฅุฐุง ูุงู ููุงู ุฑุฏุ ุงุณุชุฎุฏู ูุนุฑู ุงููุฑุณู ููุฑุณุงูุฉ ุงูููุชุจุณุฉ
  } else {
    throw 'โณ๏ธ *ูุฌุจ ุนููู ุงูุฑุฏ ุนูู ุฑุณุงูุฉ ุงููุณุชุฎุฏู*'; // ุชุฃูุฏ ูู ุฃูู ูุชู ุงูุฑุฏ ุนูู ุฑุณุงูุฉ
  }

  let txt = text.trim(); // ุงุณุชุฎุฏุงู ุงููุต ุจุงููุงูู ุจุนุฏ ุฅุฒุงูุฉ ุงูุนูุงูุงุช
  if (!txt) throw 'โณ๏ธ *ุฃุฏุฎู ูุจูุบ *ุฎุจุฑุฉ* ุงูุฐู ุชุฑูุฏ ุฅุถุงูุชู*'; // ุชุฃูุฏ ูู ูุฌูุฏ ูุจูุบ
  if (isNaN(txt)) throw '๐ข *ุฃุฑูุงู ููุท*'; // ุชุฃูุฏ ูู ุฃู ุงููุฏุฎูุงุช ูู ุฃุฑูุงู

  let xp = parseInt(txt); // ุชุญููู ุงููุต ุฅูู ุนุฏุฏ ุตุญูุญ

  if (xp < 1) throw 'โณ๏ธ ุงูุญุฏ ุงูุฃุฏูู *1*'; // ุชุฃูุฏ ูู ุฃู XP ุฃูุจุฑ ูู 0

  let users = global.db.data.users; // ุงููุตูู ุฅูู ุจูุงูุงุช ุงููุณุชุฎุฏููู
  if (!users[who]) users[who] = { exp: 0 }; // ุงูุชุฃูุฏ ูู ูุฌูุฏ ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

  // ุฅุถุงูุฉ XP ูููุณุชุฎุฏู
  users[who].exp += xp; 

  // ุชุฃููุฏ ุฅุถุงูุฉ XP
  console.log(`ุชู ุฅุถุงูุฉ ${xp} XP ูู ${who}. ุงููุฌููุน ุงูุญุงูู: ${users[who].exp}`);

  await m.reply(`โก ~*ุชูุช ุฅุถุงูุฉ ุงูุฎุจุฑุฉ*~
*โโฅโโโโโโโโโโโฅ*
*โข  โข ุงููุฌููุน: +${xp}*
*โโฅโโโโโโโโโโโฅ*`);
};

handler.help = ['addxp <ุงููุจูุบ>'];
handler.tags = ['econ'];
handler.command = ['ุฎุจุฑุฉ+', 'addxp'];
handler.rowner = true;

export default handler;