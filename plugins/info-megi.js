import fs from 'fs';
import path from 'path';

var handler = async (m, { conn }) => {
    // ุชุญุฏูุฏ ุงููุณุงุฑ ุงูุฐู ูุญุชูู ุนูู ุงูุตูุฑ
    let imagesFolder = './'; // ุชุฃูุฏ ุฃู ุงูุตูุฑ ููุฌูุฏุฉ ูู ูุฐุง ุงููุณุงุฑ ุฃู ุบููุฑ ุงููุณุงุฑ ุฅุฐุง ูุฒู ุงูุฃูุฑ

    // ูุฑุงุกุฉ ุฌููุน ุงููููุงุช ูู ุงููุฌูุฏ
    let files = fs.readdirSync(imagesFolder);

    // ุชุตููุฉ ุงููููุงุช ููุญุตูู ุนูู ุงูุตูุฑ ููุท (ุตูุบุฉ jpg, png, jpeg)
    let images = files.filter(file => /\.(jpe?g|png)$/i.test(file));

    // ุชุญูู ุฅุฐุง ูุงู ููุงู ุตูุฑ ูู ุงููุฌูุฏ
    if (images.length === 0) {
        return m.reply('ูู ูุชู ุงูุนุซูุฑ ุนูู ุฃู ุตูุฑ ูู ุงููุฌูุฏ.');
    }

    // ุงุฎุชูุงุฑ ุตูุฑุฉ ุนุดูุงุฆูุฉ ูู ุงูุตูุฑ
    let randomImage = images[Math.floor(Math.random() * images.length)];

    // ุงููุณุงุฑ ุงููุงูู ููุตูุฑุฉ ุงููุฎุชุงุฑุฉ
    let randomImagePath = path.join(imagesFolder, randomImage);

    // ุงูุฑุณุงูุฉ ุงูุชู ุณูุชู ุฅุฑุณุงููุง ุนูุฏ ุชููู ุงูุฃูุฑ
    let message = `
๐ค ๐ผ๐ด๐ถ๐๐ผ๐ธ๐ฝ ๐ค
* *ููุฑุญูุจูุง ุจููู*
โขโโโโโโโโโโโโโโโโโข
ใ๐ญใุงุณููู: ููุบูููู-megumin
ใโจ๏ธใุงุจูููุบ ููู ุงูุนููุฑ: 10 ุณูููุงุช
ใ๐ท๏ธใูุคุณุณู: ุนูู - (ูุงูุช)
โขโโโโโโโโโโโโโโโโโข
ใ๐ฌใู๐ธ๐๐๐:
โข ุงูุงูุฑ ุงุฐุง ุงุฑุฏุช ูุงุฆูู ุงูุงูุงูุฑ๐
โข ูุง ุชุชุตู ุจู ููู ูุง ูุชู ุญุธุฑู ๐ต
โข ูุง ุชูููููู ุจูุงููุฏููู ูุนู ุงู ุณูุงุญุธูุฑู ๐ซ
โข ูุง ุชุณุจ ููุง ุชุณุจุจ ุงูููุถู ูู ุงูุฌุฑูุจ
โขโโโโโโโโโโโโโโโโโข
๐ฅโญ๐๐ฒ๐ด๐๐บ๐ถ๐ป-๐๐ผ๐โญ(^_^โช)
    `.trim();

    // ุฅุฑุณุงู ุงูุตูุฑุฉ ุงูุนุดูุงุฆูุฉ ูุน ุงูุฑุณุงูุฉ
    await conn.sendFile(m.chat, randomImagePath, randomImage, message, m, { mentions: [m.sender] });
}

handler.help = ['ุจูุช', 'ููุบูููู'];
handler.register = false;
handler.group = true;
handler.tags = ['info'];
handler.command = ['ุจูุช', 'ููุบูููู']; // ุงูุฃูุงูุฑ ุงูุชู ุณูุชู ุงูุฑุฏ ุนูููุง

export default handler;